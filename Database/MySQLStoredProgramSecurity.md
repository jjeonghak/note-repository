# 스토어드 프로그램
MySQL에서는 절차적인 처리를 위해 스토어드 프로그램 사용 가능  
스토어드 루틴이라도고 표현하며, 스토어드 프로시저와 스토어드 함수, 트리거와 이벤트 등을 모두 아우르는 명칭  

<br>

## 스토어드 프로그램의 보안 옵션
8.0 버전부터 스토어드 프로그램의 생성 및 변경 권한이 `CREATE ROUTINE`, `ALTER ROUTINE`, `EXECUTE` 권한으로 분리  
트리거나 이벤트의 경우 `TRIGGER`, `EVENT` 권한으로 분리  

<br>

### DEFINER와 SQL SECURITY 옵션
- `DEFINER`  
스토어드 프로그램이 기본적으로 가지는 옵션, 소유권과 같은 의미  
스토어드 프로그램이 실행될 때의 권한으로 사용되기도 함  

- `SQL SECURITY`  
스토어드 프로그램을 누구의 권한으로 실행할지 결정하는 옵션  
`INVOKER` 또는 `DEFINER` 둘 중 하나로 선택 가능  
스토어드 프로시저, 스토어드 함수, 뷰만 가질수 있는 옵션  

<br>

|  | SQL SECURITY=DEFINER | SQL SECURITY=INVOKER |
|--|--|--|
| 기준 권한 | 정의자 | 호출자 |
| 용도 | 권한이 부족한 사용자가 특정 작업을 가능하게 하고 싶은 경우 | 호출자 권한 검사가 필요한 경우 |
| 위험 요소 | 권한 상승 가능 | 접근 제어 엄격 |
| 보안 제어 | 프로시저 외부에서 제어 필요 | 자연스럽게 권한 기반 제어 |

<br>

### DETERMINISTIC과 NOT DETERMINISTIC 옵션
스토어드 프로그램의 보안이 아닌 성능과 관련된 옵션  
두 옵션은 배타적이라서 둘 중 하나를 반드시 선택 필수  

- `DETERMINISTIC`  
입력이 같다면 시점이나 상황에 관계없이 결과가 항상 같은 순수 함수  

- `NOT DETERMINISTIC`  
입력이 같아도 시점에 따라 결과가 상이  














